"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9917],{9917:function(e,a,i){i.d(a,{ImageDrawer:function(){return l}});var t=i(7837);class l{addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}async draw(e){let{context:a,radius:t,particle:l,opacity:n}=e,s=l.image,o=null==s?void 0:s.element;if(s){if(a.globalAlpha=n,s.gif&&s.gifData){let{drawGif:a}=await i.e(7077).then(i.bind(i,7077));a(e)}else if(o){let e=s.ratio,i={x:-t,y:-t},l=2*t;a.drawImage(o,i.x,i.y,l,l/e)}a.globalAlpha=1}}getSidesCount(){return 12}async init(e){let a=e.actualOptions;if(a.preload&&this._engine.loadImage)for(let e of a.preload)await this._engine.loadImage(e)}async loadShape(e){if("image"!==e.shape&&"images"!==e.shape)return;this._engine.images||(this._engine.images=[]);let a=e.shapeData;a&&(this._engine.images.find(e=>e.name===a.name||e.source===a.src)||(await this.loadImageShape(a),await this.loadShape(e)))}async particleInit(e,a){var t,l,n,s;let o;if("image"!==a.shape&&"images"!==a.shape)return;this._engine.images||(this._engine.images=[]);let g=this._engine.images,r=a.shapeData;if(!r)return;let h=a.getFillColor(),m=g.find(e=>e.name===r.name||e.source===r.src);if(!m)return;let c=null!==(t=r.replaceColor)&&void 0!==t?t:m.replaceColor;if(m.loading){setTimeout(()=>{this.particleInit(e,a)});return}if(m.svgData&&h){let{replaceImageColor:e}=await Promise.resolve().then(i.bind(i,3397));o=await e(m,r,h,a)}else o={color:h,data:m,element:m.element,gif:m.gif,gifData:m.gifData,gifLoopCount:m.gifLoopCount,loaded:!0,ratio:r.width&&r.height?r.width/r.height:null!==(l=m.ratio)&&void 0!==l?l:1,replaceColor:c,source:r.src};o.ratio||(o.ratio=1);let d={image:o,fill:null!==(n=r.fill)&&void 0!==n?n:a.shapeFill,close:null!==(s=r.close)&&void 0!==s?s:a.shapeClose};a.image=d.image,a.shapeFill=d.fill,a.shapeClose=d.close}constructor(e){this.loadImageShape=async e=>{var a;if(!this._engine.loadImage)throw Error("".concat(t.gK," image shape not initialized"));await this._engine.loadImage({gif:e.gif,name:e.name,replaceColor:null!==(a=e.replaceColor)&&void 0!==a&&a,src:e.src})},this._engine=e}}}}]);